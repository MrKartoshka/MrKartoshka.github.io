<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="build/css/main.css">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
</head>
<body>
	<header>
		<span class="header__name">Maksym Dudnik test task list for DB2 Limited </span>
	</header>

	<section id="task-list">
	<input id="task-text"><button id="add-task">Add task</button> <button id="sort-task">Sort by name</button>
<hr>
<div id="tasks"></div>
	</section>

<script>


function get_tasks() {
    var tasks = ['Task #1','Task #2','Task #3'];
    var tasks_str = localStorage.getItem('tasks');
    if (tasks_str !== null) {
        tasks = JSON.parse(tasks_str); 
    }

    return tasks;
}


function add() {
    var task = document.getElementById('task-text').value;
 
    var tasks = get_tasks();
    tasks.push(task);
    localStorage.setItem('tasks', JSON.stringify(tasks));
 
    show();
 
    return false;
}
 
function remove() {
    var id = this.getAttribute('id');
    var tasks = get_tasks();
    tasks.splice(id, 1);
    localStorage.setItem('tasks', JSON.stringify(tasks));
 
    show();
 
    return false;
}

function sort() {
    var tasks = get_tasks();
    tasks.sort();
    localStorage.setItem('tasks', JSON.stringify(tasks));
 
    show();
 
    return false;
}
 
function show() {
    var tasks = get_tasks();
 
    var html = '';
    for(let i=0; i<tasks.length; i++) {
    	n = i +1;
        html += '<div class="task__element"> <div class="task__id"> #' + n + '</div>' + '<div class="task__name">' + tasks[i] + '</div>' +'<button class="task__remove" id="' + i  + '"></button>  </div>';
    };
    html += '';
 
    document.getElementById('tasks').innerHTML = html;
 
    var buttons = document.getElementsByClassName('task__remove');
    for (var i=0; i < buttons.length; i++) {
        buttons[i].addEventListener('click', remove);
    };
    console.log(localStorage.getItem('tasks'));
}
 
document.getElementById('add-task').addEventListener('click', add);
document.getElementById('sort-task').addEventListener('click', sort);
show();
</script>

</body>
</html> 